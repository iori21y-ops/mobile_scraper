name: scheduled-scrape

on:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  run-scraper:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: mobile_scraper   # ðŸ‘ˆ ëª¨ë“  step ì‹¤í–‰ ê²½ë¡œë¥¼ mobile_scraperë¡œ ì§€ì •
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          persist-credentials: false

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"
          cache: "pip"

      - name: Install deps
        run: |
          pip install -r requirements.txt
          python -m playwright install --with-deps

      - name: Run scrape
        run: python scrape.py   # ðŸ‘ˆ scrape.py ì‹¤í–‰
        env:
          TARGET_URLS: ${{ secrets.TARGET_URLS }}
          CSS_ITEM:    ${{ secrets.CSS_ITEM }}
          CSS_TITLE:   ${{ secrets.CSS_TITLE }}